(this["webpackJsonpsudoku-app"]=this["webpackJsonpsudoku-app"]||[]).push([[0],{16:function(e,n,t){},23:function(e,n,t){},24:function(e,n,t){"use strict";t.r(n);var r=t(2),a=t.n(r),c=t(9),l=t.n(c);t(16),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=t(10),i=t(1),o=t(5),u=t(6),d=t(3),h=t.n(d),j=t(0);var v=[0,1,2,3,4,5,6,7,8],f=["row","column","region"],b=[0,1,2];function O(){return Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{}),v.map((function(e){return Object(j.jsx)("th",{scope:"col",children:e},e)}))]})})}function x(e){var n=e.row,t=e.cells,r="ABCDEFGHI".charAt(n),a=9*n;return Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"row",children:r}),v.map((function(e){return t[a+e]}))]})}var y=function(e){var n=e.cells,t=e.className;return Object(j.jsx)("div",{className:t,children:Object(j.jsxs)("table",{children:[Object(j.jsx)("colgroup",{span:"1"}),Object(j.jsx)("colgroup",{className:"region",span:"3"}),Object(j.jsx)("colgroup",{className:"region",span:"3"}),Object(j.jsx)("colgroup",{className:"region",span:"3"}),Object(j.jsx)(O,{}),Object(j.jsxs)("tbody",{className:"region",children:[Object(j.jsx)(x,{row:0,cells:n}),Object(j.jsx)(x,{row:1,cells:n}),Object(j.jsx)(x,{row:2,cells:n})]}),Object(j.jsxs)("tbody",{className:"region",children:[Object(j.jsx)(x,{row:3,cells:n}),Object(j.jsx)(x,{row:4,cells:n}),Object(j.jsx)(x,{row:5,cells:n})]}),Object(j.jsxs)("tbody",{className:"region",children:[Object(j.jsx)(x,{row:6,cells:n}),Object(j.jsx)(x,{row:7,cells:n}),Object(j.jsx)(x,{row:8,cells:n})]})]})})},w=[1,2,3,4,5,6,7,8,9],m=function(){function e(n,t,r,a,c){Object(o.a)(this,e),this.index=n,this.value=t,r?(this.readOnly=!0,h()(!a,"readOnly cell should not have errors '".concat(a,"'")),h()(!c,"readOnly cell should not have availableValues '".concat(c,"'"))):(this.errors=void 0!==a?a:{row:0,column:0,region:0,total:0},isNaN(this.value)?this.availableValues=c||new Set(w):this.availableValues=new Set),Object.freeze(this.errors),Object.freeze(this.availableValues),Object.freeze(this)}return Object(u.a)(e,[{key:"row",get:function(){return Math.trunc(this.index/9)}},{key:"column",get:function(){return this.index%9}},{key:"regionRow",get:function(){return Math.trunc(this.row/3)}},{key:"regionColumn",get:function(){return Math.trunc(this.column/3)}},{key:"region",get:function(){return 3*this.regionRow+this.regionColumn}},{key:"segment",value:function(e){switch(e){case"row":return this.row;case"column":return this.column;case"region":return this.region;default:throw new Error("Unknown segment type '".concat(e,"'"))}}}]),e}(),g=t(11),p=function(){function e(n,t,r){Object(o.a)(this,e),this.type=n,this.index=t,this.cells=r}return Object(u.a)(e,[{key:"values",get:function(){return this.cells.map((function(e){return e.value})).filter((function(e){return!isNaN(e)}))}},{key:"cellsByAvailableValue",get:function(){return this._cellsByAvailableValue=this._cellsByAvailableValue||this.cells.reduce((function(e,n){if(isNaN(n.value)){var t,r=Object(i.a)(n.availableValues);try{for(r.s();!(t=r.n()).done;){var a=t.value;e.has(a)||e.set(a,[]),e.get(a).push(n)}}catch(c){r.e(c)}finally{r.f()}}return e}),new Map)}},{key:"isValueAvailable",value:function(e){return this.cellsByAvailableValue.has(e)}}],[{key:"newFrom",value:function(e,n,t){switch(t){case"row":return function(e,n){var t=9*n,r=v.map((function(n){return e[t+n]}));return new p("row",n,r)}(e,n);case"column":return function(e,n){var t=v.map((function(t){return e[9*t+n]}));return new p("column",n,t)}(e,n);case"region":return function(e,n){var t=Math.trunc(n/3),r=n%3,a=b.flatMap((function(n){var a=3*t+n;return b.map((function(n){return e[9*a+(3*r+n)]}))}));return new p("region",n,a)}(e,n);default:throw new Error("Unknown segment type '".concat(t,"'"))}}}]),e}();function N(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.index=e,this.value=n,this.gridCells=t,this.readOnly=r}function k(e,n){return h()(n.constructor===N,"Invalid action '".concat(n.constructor,"'")),n.value<1||n.value>9?e:new S(function(e,n){var t=Object(g.a)(e),r=V(t[n.index],n);t[n.index]=r;var a,c=Object(i.a)(f);try{for(c.s();!(a=c.n()).done;){var l,s=a.value,o=r.segment(s),u=p.newFrom(e,o,s),d=Object(i.a)(u.cells);try{for(d.s();!(l=d.n()).done;){var h=l.value;isNaN(h.value)&&h.index!==n.index&&(t[h.index]=V(h,n))}}catch(j){d.e(j)}finally{d.f()}}}catch(j){c.e(j)}finally{c.f()}return t}(e.cells,n))}function V(e,n){return h()(!e.readOnly,"Should not reduce a readOnly cell '".concat(e,"'")),e.index===n.index?isNaN(n.value)?function(e,n){return new m(n.index,n.value,n.readOnly,void 0,C(e,n))}(e,n):function(e,n){return new m(n.index,n.value,n.readOnly,n.readOnly?void 0:e.errors,void 0)}(e,n):(h()(isNaN(e.value),"Should not refresh cell with value '".concat(e.value,"'")),function(e,n){return new m(e.index,e.value,e.readOnly,e.errors,C(e,n))}(e,n))}function C(e,n){var t=new Set(w);t.delete(n.value);var r,a=Object(i.a)(f);try{for(a.s();!(r=a.n()).done;){var c,l=r.value,s=e.segment(l),o=p.newFrom(n.gridCells,s,l),u=Object(i.a)(o.cells);try{for(u.s();!(c=u.n()).done;){var d=c.value;isNaN(d.value)||d.index===n.index||t.delete(d.value)}}catch(h){u.e(h)}finally{u.f()}}}catch(h){a.e(h)}finally{a.f()}return t}var S=function(){function e(n){Object(o.a)(this,e),this.cells=n||this._emptyGrid(),h()(this.cells.length===Math.pow(9,2),"Grid has incorrect number of cells '".concat(this.cells.length,"'")),Object.freeze(this.cells),Object.freeze(this)}return Object(u.a)(e,[{key:"_emptyGrid",value:function(){var e=0;return v.flatMap((function(){return v.map((function(){return new m(e++,NaN)}))}))}},{key:"_parseGridString",value:function(e){return e.split("").map((function(e,n){return e=!e||e<1?NaN:parseInt(e),new m(n,e,!isNaN(e))}))}}],[{key:"newFrom",value:function(n){var t,r=new e,a=r._parseGridString(n),c=Object(i.a)(a);try{for(c.s();!(t=c.n()).done;){var l=t.value;isNaN(l.value)||(r=k(r,new N(l.index,l.value,a,!0)))}}catch(s){c.e(s)}finally{c.f()}return r}}]),e}(),A=a.a.createContext((function(e){return null})),M=a.a.createContext(new S);function z(e){var n=e.index,t=Object(r.useContext)(M).cells[n];return isNaN(t.value)?Object(j.jsx)("td",{className:"".concat(1===t.availableValues.size?"hint":"unsolved"),children:Array.from(t.availableValues).sort().join(" ")}):t.readOnly?Object(j.jsx)("td",{className:"readonly",children:t.value}):Object(j.jsx)("td",{children:t.value})}var B=function(){var e,n=[],t=Object(i.a)(v);try{for(t.s();!(e=t.n()).done;){var r,a=e.value,c=Object(i.a)(v);try{for(c.s();!(r=c.n()).done;){var l=9*a+r.value,s=Object(j.jsx)(z,{index:l},l);n.push(s)}}catch(o){c.e(o)}finally{c.f()}}}catch(o){t.e(o)}finally{t.f()}return Object(j.jsx)(y,{className:"sudoku debug",cells:n})};function G(e){var n=e.index,t=Object(r.useContext)(A),a=Object(r.useContext)(M),c=a.cells[n];return c.readOnly?Object(j.jsx)("td",{className:"readonly",children:c.value}):Object(j.jsx)("td",{children:Object(j.jsx)("input",{type:"number",min:"1",max:"9",maxLength:"1",value:c.value?c.value:"",onChange:function(e){return t(new N(c.index,e.target.valueAsNumber,a.cells))},className:"".concat(1===c.availableValues.size?"hint":""," ").concat(c.errors.total>0?"error":"")})})}var _=function(){var e,n=[],t=Object(i.a)(v);try{for(t.s();!(e=t.n()).done;){var r,a=e.value,c=Object(i.a)(v);try{for(c.s();!(r=c.n()).done;){var l=9*a+r.value,s=Object(j.jsx)(G,{index:l},l);n.push(s)}}catch(o){c.e(o)}finally{c.f()}}}catch(o){t.e(o)}finally{t.f()}return Object(j.jsx)(y,{className:"sudoku",cells:n})};t(23);var F=function(e){var n=e.gridString,t=Object(r.useReducer)(k,n,S.newFrom),a=Object(s.a)(t,2),c=a[0],l=a[1];return Object(j.jsx)(M.Provider,{value:c,children:Object(j.jsxs)(A.Provider,{value:l,children:[Object(j.jsx)(_,{}),Object(j.jsx)(B,{})]})})};l.a.render(Object(j.jsxs)(a.a.StrictMode,{children:[Object(j.jsx)("p",{children:Object(j.jsx)("a",{href:"https://github.com/stevenl/sudoku/",target:"_blank",rel:"noopener noreferrer",children:"Source on GitHub"})}),Object(j.jsx)(F,{gridString:"000000080005073090000900300000200709900136004403009000001005000060840900070000000"})]}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.202db220.chunk.js.map