(this["webpackJsonpsudoku-app"]=this["webpackJsonpsudoku-app"]||[]).push([[0],{15:function(e,t,r){},16:function(e,t,r){},18:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),c=r(10),l=r.n(c);r(15),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=r(5),o=r(1),i=r(6),u=r(7),j=r(9);function v(e,t,r){this.index=e,this.value=t,this.readOnly=r||!1}function h(e,t){if(t.constructor!==v)throw new Error("Invalid action ".concat(t));return t.value<1||t.value>9?e:isNaN(t.value)?function(e,t){var r,n=Object(j.a)(e.cells),a=new w(n),c=n[t.index],l=n[t.index]=d(c,t),s=Object(o.a)(O);try{for(s.s();!(r=s.n()).done;){var i=r.value,u=l[i],v=a.segment(i,u),h=v.values;l.removeAvailableValues(h);var f,x=Object(o.a)(v.cells);try{e:for(x.s();!(f=x.n()).done;){var y=f.value;if(!y.readOnly){var g,m=Object(o.a)(O);try{for(m.s();!(g=m.n()).done;){var p=g.value;if(!a.segment(p,y[p]).isValueAvailable(c.value))continue e}}catch(E){m.e(E)}finally{m.f()}y.addAvailableValue(c.value)}}}catch(E){x.e(E)}finally{x.f()}b(v);var N=v.cells.filter((function(e){return e.value===c.value}));if(1===N.length){var k,V=Object(o.a)(N);try{for(V.s();!(k=V.n()).done;){var A=k.value;!A.readOnly&&A.errors[i]&&A.clearError(i)}}catch(E){V.e(E)}finally{V.f()}}}}catch(E){s.e(E)}finally{s.f()}return new w(n)}(e,t):function(e,t){var r,n=Object(j.a)(e.cells),a=new w(n),c=n[t.index],l=n[t.index]=d(c,t),s=Object(o.a)(O);try{for(s.s();!(r=s.n()).done;){var i,u=r.value,v=l[u],h=a.segment(u,v),f=Object(o.a)(h.cells);try{for(f.s();!(i=f.n()).done;){var x=i.value;isNaN(x.value)&&x.availableValues.has(t.value)&&x.removeAvailableValues([t.value])}}catch(N){f.e(N)}finally{f.f()}b(h);var y=h.cells.filter((function(e){return e.value===t.value}));if(y.length>1){var g,m=Object(o.a)(y);try{for(m.s();!(g=m.n()).done;){var p=g.value;p.readOnly||p.errors[u]||p.setError(u)}}catch(N){m.e(N)}finally{m.f()}}}}catch(N){s.e(N)}finally{s.f()}return a}(e,t)}function b(e){var t,r=Object(o.a)(e.cellsByAvailableValue);try{for(r.s();!(t=r.n()).done;){var n=Object(s.a)(t.value,2),a=n[0],c=n[1];1===c.length&&c[0].setAvailableValue(a)}}catch(l){r.e(l)}finally{r.f()}}function d(e,t){if(e.readOnly)throw new Error("Attempted to modify readOnly cell ".concat(e.index));if(t.constructor===v){var r=t.readOnly,n=r||isNaN(t.value)?void 0:e.errors;return new m(t.index,t.value,r,n)}throw new Error("Unknown action type ".concat(t.type))}var f=[0,1,2,3,4,5,6,7,8],O=["row","column","region"],x=[0,1,2],y=[1,2,3,4,5,6,7,8,9],w=function(){function e(t){if(Object(i.a)(this,e),this.cells=t||this._emptyGrid(),this.cells.length!==Math.pow(9,2))throw new Error("Grid must contain 81 cells: got ".concat(t.length));Object.freeze(this)}return Object(u.a)(e,[{key:"init",value:function(e){var t,r=this,n=this._parseGrid(e),a=Object(o.a)(n);try{for(a.s();!(t=a.n()).done;){var c=t.value;isNaN(c.value)||(r=h(r,new v(c.index,c.value,!0)))}}catch(l){a.e(l)}finally{a.f()}return r}},{key:"_emptyGrid",value:function(){var e=0;return f.flatMap((function(){return f.map((function(){return new m(e++,NaN)}))}))}},{key:"_parseGrid",value:function(e){return e.split("").map((function(e,t){return e=!e||e<1?NaN:parseInt(e),new m(t,e,!isNaN(e))}))}},{key:"row",value:function(e){var t=this,r=9*e,n=f.map((function(e){return t.cells[r+e]}));return new g("row",e,n)}},{key:"column",value:function(e){var t=this,r=f.map((function(r){return t.cells[9*r+e]}));return new g("column",e,r)}},{key:"region",value:function(e){var t=this,r=Math.trunc(e/3),n=e%3,a=x.flatMap((function(e){var a=3*r+e;return x.map((function(e){var r=9*a+(3*n+e);return t.cells[r]}))}));return new g("region",e,a)}},{key:"segment",value:function(e,t){switch(e){case"row":return this.row(t);case"column":return this.column(t);case"region":return this.region(t);default:throw new Error("Unknown segment type '".concat(e,"'"))}}}]),e}(),g=function(){function e(t,r,n){Object(i.a)(this,e),this.type=t,this.index=r,this.cells=n}return Object(u.a)(e,[{key:"values",get:function(){return this.cells.map((function(e){return e.value})).filter((function(e){return!isNaN(e)}))}},{key:"cellsByAvailableValue",get:function(){return this._cellsByAvailableValue=this._cellsByAvailableValue||this.cells.reduce((function(e,t){if(isNaN(t.value)){var r,n=Object(o.a)(t.availableValues);try{for(n.s();!(r=n.n()).done;){var a=r.value;e.has(a)||e.set(a,[]),e.get(a).push(t)}}catch(c){n.e(c)}finally{n.f()}}return e}),new Map)}},{key:"isValueAvailable",value:function(e){return this.cellsByAvailableValue.has(e)}}]),e}(),m=function(){function e(t,r,n,a,c){if(Object(i.a)(this,e),this.index=t,this.value=r,n){if(this.readOnly=!0,a||c)throw new Error("readOnly cell should not have errors or availableValues ".concat(a," or ").concat(c))}else this.errors=void 0!==a?a:{row:0,column:0,region:0,total:0},isNaN(this.value)?this.availableValues=c||new Set(y):this.availableValues=new Set;Object.freeze(this)}return Object(u.a)(e,[{key:"row",get:function(){return Math.trunc(this.index/9)}},{key:"column",get:function(){return this.index%9}},{key:"regionRow",get:function(){return Math.trunc(this.row/3)}},{key:"regionColumn",get:function(){return Math.trunc(this.column/3)}},{key:"region",get:function(){return 3*this.regionRow+this.regionColumn}},{key:"setError",value:function(e){if(this.errors[e])throw new Error("Error has already been set for segment type ".concat(e));this.errors[e]=1,this.errors.total+=1}},{key:"clearError",value:function(e){if(!this.errors[e])throw new Error("Error is not set for segment type ".concat(e));this.errors[e]=0,this.errors.total-=1}},{key:"setAvailableValue",value:function(e){this.availableValues.clear(),this.availableValues.add(e)}},{key:"addAvailableValue",value:function(e){this.availableValues.add(e)}},{key:"removeAvailableValues",value:function(e){var t,r=Object(o.a)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.availableValues.delete(n)}}catch(a){r.e(a)}finally{r.f()}}}]),e}(),p=(r(16),r(0)),N=a.a.createContext(new w),k=a.a.createContext((function(e){return null}));function V(e){var t=Object(n.useReducer)(h,e.gridString,(function(e){return(new w).init(e)})),r=Object(s.a)(t,2),a=r[0],c=r[1];return Object(p.jsx)(N.Provider,{value:a,children:Object(p.jsxs)(k.Provider,{value:c,children:[Object(p.jsx)("div",{className:"sudoku",children:Object(p.jsx)(A,{})}),Object(p.jsx)("div",{className:"sudoku debug",children:Object(p.jsx)(B,{})})]})})}function A(){return Object(p.jsxs)("table",{children:[Object(p.jsx)("colgroup",{span:"1"}),Object(p.jsx)("colgroup",{className:"region",span:"3"}),Object(p.jsx)("colgroup",{className:"region",span:"3"}),Object(p.jsx)("colgroup",{className:"region",span:"3"}),Object(p.jsx)(M,{}),Object(p.jsxs)("tbody",{className:"region",children:[Object(p.jsx)(E,{row:0}),Object(p.jsx)(E,{row:1}),Object(p.jsx)(E,{row:2})]}),Object(p.jsxs)("tbody",{className:"region",children:[Object(p.jsx)(E,{row:3}),Object(p.jsx)(E,{row:4}),Object(p.jsx)(E,{row:5})]}),Object(p.jsxs)("tbody",{className:"region",children:[Object(p.jsx)(E,{row:6}),Object(p.jsx)(E,{row:7}),Object(p.jsx)(E,{row:8})]})]})}function E(e){var t="ABCDEFGHI".charAt(e.row),r=9*e.row;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:t}),f.map((function(e){var t=r+e;return Object(p.jsx)(C,{index:t},t)}))]})}function C(e){var t=Object(n.useContext)(k),r=Object(n.useContext)(N).cells[e.index];return r.readOnly?Object(p.jsx)("td",{className:"readonly",children:r.value}):Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"number",min:"1",max:"9",maxLength:"1",value:r.value?r.value:"",onChange:function(e){return t(new v(r.index,e.target.valueAsNumber))},className:"".concat(1===r.availableValues.size?"hint":""," ").concat(r.errors.total>0?"error":"")})})}function B(){return Object(p.jsxs)("table",{children:[Object(p.jsx)("colgroup",{span:"1"}),Object(p.jsx)("colgroup",{className:"region",span:"3"}),Object(p.jsx)("colgroup",{className:"region",span:"3"}),Object(p.jsx)("colgroup",{className:"region",span:"3"}),Object(p.jsx)(M,{}),Object(p.jsxs)("tbody",{className:"region",children:[Object(p.jsx)(G,{row:0}),Object(p.jsx)(G,{row:1}),Object(p.jsx)(G,{row:2})]}),Object(p.jsxs)("tbody",{className:"region",children:[Object(p.jsx)(G,{row:3}),Object(p.jsx)(G,{row:4}),Object(p.jsx)(G,{row:5})]}),Object(p.jsxs)("tbody",{className:"region",children:[Object(p.jsx)(G,{row:6}),Object(p.jsx)(G,{row:7}),Object(p.jsx)(G,{row:8})]})]})}function M(){return Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{}),f.map((function(e){return Object(p.jsx)("th",{scope:"col",children:e},e)}))]})})}function G(e){var t="ABCDEFGHI".charAt(e.row),r=9*e.row;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:t}),f.map((function(e){var t=r+e;return Object(p.jsx)(_,{index:t},t)}))]})}function _(e){var t=Object(n.useContext)(N).cells[e.index];return isNaN(t.value)?Object(p.jsx)("td",{className:"".concat(1===t.availableValues.size?"hint":"unsolved"),children:Array.from(t.availableValues).sort().join(" ")}):t.readOnly?Object(p.jsx)("td",{className:"readonly",children:t.value}):Object(p.jsx)("td",{children:t.value})}l.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(V,{gridString:"000000080005073090000900300000200709900136004403009000001005000060840900070000000"})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.9af8ac70.chunk.js.map